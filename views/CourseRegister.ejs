<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="ISD.css">
    <title>Homepage</title>
</head>
<body>
    <div id="wrapper">
        <div class="con">
            <header>
              <div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/Logo-LNMIIT.svg/799px-Logo-LNMIIT.svg.png?20110427094856" alt="">
              </div>
              <div>
                <h3>
                  THE LNM INSTITUTE OF INFORMATION TECHNOLOGY
                </h3>
                <h5>
                  "EXCELLENCE OUR MOTTO DISCIPLINE OUR WAY"
                </h5>
              </div>
            </header>
          </div>
          <div class="con">
            
                       
        </div>
        <div class="con">
            <div class="coreCourses">
                <h3> <span>Courses</span></h3>
                <div id="core" class="courseOutput coreCourseRegister">
                    <ul>
                      <li> <span>Name</span></li>
                      <li> <span>Credit</span> </li>
                      <li> <span>ID</span></li>
                      <li> <span>Type</span></li>
                    </ul>
                    <% for (c of coreCourse) {%>
                    <ul>
                      <li> <span><%= c.name %></span>  </li>
                      <li><span><%= c.credits %></span></li>
                      <li><span><%= c.courseid %></span></li>
                      <li><span>Core</span></li>
                    </ul>
                    <%}%>
                    <!-- <ul>
                      <li><span>Information Data Science</span></li>
                      <li><span>3</span></li>
                      <li><span>2IDS02</span></li>
                      <li><span>Core</span></li>
                    </ul>
                    <ul>
                      <li> <span>Artificial Inteligence</span>  </li>
                      <li><span>3</span></li>
                      <li><span>1AI03</span></li>
                      <li><span>Core</span></li>
                    </ul>
                    <ul>
                      <li> <span>Artificial Inteligence</span>  </li>
                      <li><span>3</span></li>
                      <li><span>1AI03</span></li>
                      <li><span>Core</span></li>
                    </ul> -->
                    <%if(elecCourse.length!=0){%>
                  <button type="button" id="next" onclick="nextftn()" class="btn btn-info">Next</button>
                      
                      <%}else{%>
                  <button type="button" id="next"  class="btn btn-info"> <a href="/genReport">Submit</a></button>
                      
                        <%}%>
                    
                  </div>
                  <div id="elect" class="courseOutput electiveCourseRegister">
                <h3> <span>Chose Elective Courses Preference</span></h3>
               
                <form action="/submitCourse" method="POST">
                  <ul>
                    <li> <span>Name</span></li>
                    <li> <span>Credit</span> </li>
                    <li> <span>ID</span></li>
                    <li> <span>Preference</span></li>

                  </ul>
                  <% for (c of elecCourse) {%>
                    <ul>
                      <li> <span><%= c.name %></span>  </li>
                      <li><span><%= c.credits %></span></li>
                      <li><span><%= c.courseid %></span></li>
                      <li><span><input onClick="checkIn()" type="number" name="preference[<%=c.courseid%>]" min="1" max="<%=totelec%>" step="1" value="1" ></span></li>
                    </ul>
                    <%}%>
                    
                    <div id="elecSubmit">
                        <p id="preferCheck">Please Fill Preference Correctly.</p>
                        
                        <button type="submit" id="submit" class="btn btn-info">Submit</button>
                        </div>
                      </form>
                      </div>

                  
            </div>
        </div>
        
    </div>
</body>
<script>
    var next = document.getElementById("next");
    var elect = document.getElementById("elect");
    var core = document.getElementById("core");

    function nextftn(){
        // console.log("SSS");
        elect.style.display="flex";
        core.style.display="none";
    }
   
    var inputs, index;
    var bt = document.getElementById("submit");
    var pr = document.getElementById("preferCheck");

    inputs = document.getElementsByTagName('input');
    function checkIn(){
      let a=[];
      for (index = 0; index < inputs.length; ++index) {
       // deal with inputs[index] element.
       a.push(inputs[index].value);
    }
      if(hasDuplicates(a)){
        console.log("SAME");
        bt.style.display="none";
        pr.style.display="block";

      }else{
        console.log("DONE");
        bt.style.display="block";
        pr.style.display="none";

      }
    }
    function hasDuplicates(array) {
    return (new Set(array)).size !== array.length;
}
    
</script>
</html>